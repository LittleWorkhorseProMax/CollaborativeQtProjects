在现在打开的，由Qt Creator创建的初始化项目中，**从 0 开始，使用 Qt 5 + Qt Quick (QML) + C++ 构建一个完整、可运行、可扩展的 Windows 桌面图片管理与搜索应用**，并提供完整的前端项目代码、接口定义文档、项目结构说明。

本项目为真实工程级项目，而非示例 Demo。

---

# 一、技术与工程约束（必须遵守）

## 技术栈
- Qt 版本：Qt 5.15.2
- UI：Qt Quick（QML + Qt Quick Controls 2）
- 语言：C++17
- 构建系统：CMake
- 目标平台：Windows 桌面应用
- 第三方库：通过 vcpkg 安装（如 libcurl、json 库等）
- 网络通信：
	- RESTful API
	- C++ 层使用 `libcurl`
- 后端语言：PHP（仅定义接口，不实现后端）

## 架构要求
- **C++ 负责业务逻辑、数据模型、网络通信**
- **QML 负责 UI、动画、交互**
- 使用 **MVVM / MVC 混合架构**
- 使用 `QAbstractListModel` / `QAbstractTableModel` 向 QML 暴露数据
- 所有网络请求必须是 **异步**
- UI 与后端接口解耦

## 设计目标（高优先级）

- UI 专业、美观、现代化，符合 Windows 桌面用户习惯
- 架构清晰，前后端解耦
- 接口设计完整，即使后端未实现也能直接对接
- 所有“未明确指定的 UI/交互细节”，**由你按最佳实践补全，而不是省略**

---

# 二、应用功能总览

## 1. 主界面（图片浏览）

应用启动后直接进入图片展示界面，支持两种视图模式（可保存用户偏好）：

### 1.1 网格视图（Grid View）

> 类似 Google Photos / Apple Photos 网格，**不同比例图片要尽量紧密排布**（推荐使用 delegate 动态计算最佳尺寸或 masonry 风格布局）

- 紧密排列图片缩略图
- 针对不同长宽比图片自动布局
- 鼠标悬停显示基本信息（文件名 / 标签 / 评分）
- 以图片视觉内容为主
- 支持：
  - 多选后右键/工具栏可：删除（移入回收站或彻底删除）、批量编辑标签
  - 点击进入图片详情页
  - 批量删除（数据库）

### 1.2 列表视图（List View）
- 每张图片占一行
- 左侧：缩略图
- 右侧：图片信息预览（文件名 / 文件大小 / 尺寸 / 标签 / 评分等）
- 偏向“信息管理”视角
- 支持：
	- 多选后右键/工具栏可：删除（移入回收站或彻底删除）、批量编辑标签
	- 点击进入图片详情页
	- 批量删除（数据库）

### 1.3 视图切换
- 明确的切换按钮
- 有动画过渡
- UI 风格参考：Windows 桌面主流应用（网易云 / Bilibili）

---

## 2. 图片筛选与搜索

### 2.1 图片信息筛选（Filter）

快速筛选器（类似标签云/折叠面板）：

- 按以下条件筛选：
  - 标签（多选）
  - 评分区间
  - 图片尺寸区间
  - 导入时间区间
  - 文件大小区间
- 筛选条件组合生效

### 2.2 搜索功能（Search）
支持多种搜索方式，且**可与筛选条件联合使用**（支持以下三种搜索方式**混合使用**，结果取交集）

- 文件名搜索（支持模糊匹配）

- 关键词搜索

	- 基于图片“文本描述”字段

	- 后端完成检索，前端展示结果


- 以图搜图

	- 上传一张图片

	- 后端向量化

	- 后端返回相似度排序结果

	- 前端按相似度优先展示


#### 2.2.4 搜索记录
- 保存搜索历史
- 尤其需要设计「以图搜图」的记录保存方式
	- 本地图片路径 / hash
	- 时间
	- 相似度阈值


### 2.3 联合搜索规则

筛选与搜索区域必须同时存在且可协同工作，

- 搜索条件与筛选条件 **AND 组合**
- 搜索结果可实时刷新

---

## 3. 图片详情页

点击任意图片进入详情页，展示：

- 图片原图 / 高清预览（大图预览，可缩放、拖动、适应窗口）
- 图片信息展示（显示并可编辑所有字段）：
	- 文件名、文件大小、分辨率（宽 × 高）、导入时间
	- 评分（服务器算法返回）
	- 标签（可编辑）
	- 文本描述（可编辑）
- 功能按钮：
	- 点击编辑，保存修改
	- 从数据库删除此图片
	- 返回

---

## 4. 管理界面（后台管理）

独立页面，通过左上角或侧边栏按钮进入，功能模块：

- 图片管理

	- 上传图片

	- 删除图片（按标签 / 条件）


- 标签与统计

	- 展示所有标签

	- 每个标签对应的图片数量

	- 图片总数、各评分段数量、各种尺寸分布统计（简单饼图或柱状图也可）

	- 可扩展统计视图设计
	- 回收站（已删除图片，可还原或彻底删除）


---

## 5. 图片上传系统（独立页面）

### 5.1 上传方式
- 拖拽上传（单张 / 多张）
- 文件选择对话框上传
- 限定图片格式（如 jpg / png / webp）

### 5.2 上传前可编辑（可选）：
- 可填写图片信息：
  - 文件名
  - 可批量设置标签
  - 批量填写描述文本
- 编辑后上传：
  - 单张图片可简单裁剪（矩形裁剪即可，可使用 Qt 内置方案）
- 直接上传

### 5.3 交互细节
- 实时进度条（每个文件独立进度或总进度）
- 成功 / 失败提示
- 上传成功后自动生成 256x256 或 512x512 缩略图存入本地缩略图文件夹
- 异常处理（网络错误 / 格式错误）以及错误原因提示


---

# 三、后端接口设计（必须完整给出）

你需要 **先行设计所有 RESTful API**，包括但不限于：

## 示例接口类型
- 获取图片列表（分页 / 筛选 / 搜索）
- 获取图片详情
- 上传图片
- 删除图片
- 更新图片信息
- 以图搜图接口
- 获取标签及统计信息
- 搜索记录接口

## 接口要求
- 清晰的 URL 设计
- HTTP Method 合理（GET / POST / PUT / DELETE）
- 请求参数说明
- 返回 JSON 示例
- 明确：
	- Method
	- Request / Response 示例
	- 错误码规范

> 后端使用 PHP，但**你只负责前端接口契约设计**

---

# 五、Qt 前端实现要求

## C++ 层
- 网络层（libcurl 或 Qt 网络）
- 数据模型（图片 / 标签 / 搜索记录）
- 状态管理
- 与 QML 交互接口（QObject / Q_PROPERTY）

## QML 层
- 页面拆分清晰（主页 / 详情页 / 管理页 / 上传页）
- 可复用组件
- 动画与交互逻辑
